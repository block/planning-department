<div class="page-header">
  <h1>Plans</h1>
</div>

<div class="status-filters">
  <%= link_to "All", plans_path, class: "status-filter #{'status-filter--active' if params[:status].blank?}" %>
  <% Plan::STATUSES.each do |status| %>
    <%= link_to status.titleize, plans_path(status: status), class: "status-filter status-filter--#{status} #{'status-filter--active' if params[:status] == status}" %>
  <% end %>
</div>

<% if @plans.any? %>
  <div class="plans-list">
    <% @plans.each do |plan| %>
      <div class="card plans-list__item">
        <div class="plans-list__header">
          <%= link_to plan.title, plan_path(plan), class: "plans-list__title" %>
          <span class="badge badge--<%= plan.status %>"><%= plan.status %></span>
        </div>
        <div class="plans-list__meta text-sm text-muted">
          by <%= plan.created_by_user.name %> · v<%= plan.current_revision %> · updated <%= time_ago_in_words(plan.updated_at) %> ago
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state card">
    <p>No plans yet. Plans are created via the API.</p>
  </div>
<% end %>
